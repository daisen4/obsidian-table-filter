# 要件定義書: obsidian-table-filter

**バージョン**: 1.0.0
**作成日**: 2026年2月

---

## 1. プロジェクト概要

ObsidianのMarkdownノートに含まれるテーブルに対して、リアルタイムでのフィルタリング機能を提供するコミュニティプラグイン。

---

## 2. 背景・目的

Obsidianのテーブルは行数が増えると目的の行を探しにくくなる。また列数が多いテーブルを縦にスクロールするとヘッダーが見えなくなり、どの列を見ているかわからなくなる。これらの問題を解消し、テーブルの視認性・操作性を向上させる。

---

## 3. 対象ユーザー

- Obsidianでテーブルを多用するユーザー
- データの検索・絞り込みをノート上で行いたいユーザー

---

## 4. 機能要件

### 4.1 テーブルフィルタリング

| # | 要件 | 優先度 |
|---|------|--------|
| F-01 | 各列のヘッダーにフィルターボタン（▼）を表示する | 必須 |
| F-02 | ▼ボタンをクリックするとドロップダウンパネルが開く | 必須 |
| F-03 | テキスト列はテキスト入力によるあいまい検索ができる | 必須 |
| F-04 | 数値列は比較演算子（≥ ≤ = > <）と数値入力によるフィルタリングができる | 必須 |
| F-05 | 列が数値のみで構成されている場合、自動的に数値列として判定する | 必須 |
| F-06 | 複数列にフィルターを設定した場合、AND条件で絞り込む | 必須 |
| F-07 | フィルター入力はリアルタイムで反映される（入力のたびに即時フィルタリング） | 必須 |
| F-08 | パネル外をクリックするとドロップダウンが閉じる | 必須 |

### 4.2 ヘッダー固定

| # | 要件 | 優先度 |
|---|------|--------|
| H-01 | テーブルを縦スクロールしても1行目（thead）が常に表示される | 必須 |
| H-02 | 固定ヘッダーの背景はObsidianのテーマに合わせて自動設定される | 必須 |
| H-03 | テーブルが画面内に収まっているときはヘッダー固定を表示しない | 必須 |

### 4.3 対応モード

| # | 要件 | 優先度 |
|---|------|--------|
| M-01 | 閲覧モード（Reading View）で動作する | 必須 |
| M-02 | 編集モード（Live Preview）で動作する | 必須 |

---

## 5. 非機能要件

| # | 要件 |
|---|------|
| N-01 | ObsidianのすべてのテーマでUIが正しく表示される（CSSカスタムプロパティ使用） |
| N-02 | プラグイン無効化時にDOMに追加した要素をすべて削除する |
| N-03 | エディタ操作（スクロール・編集）を妨げない |
| N-04 | Obsidian最小対応バージョン: 1.0.0 |

---

## 6. 対象外（スコープ外）

- ソート機能
- フィルター条件の保存・復元
- 複数テーブルをまたいだ検索
- モバイル（Obsidian Mobile）での動作保証
